(this["webpackJsonpcrypto-trading"]=this["webpackJsonpcrypto-trading"]||[]).push([[9],{593:function(e,t,a){},618:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(74),o=a.n(c),s=a(86),l=a(47),i=a(54),u=a.n(i),m=a(258),p=a(254),d=a(611),f=a(227),h=a(57),b=a(228),g=(localStorage.getItem("token"),function(e){var t=Object(n.useState)(!1),a=Object(l.a)(t,2),c=a[0],i=a[1],g=localStorage.getItem("token"),y=Object(n.useState)(0),E=Object(l.a)(y,2),v=E[0],k=E[1],x=function(e){return isNaN(parseFloat(e))?"":parseFloat(e)},N=function(t){return t<=e.holdings[1].amount?void 0:"Can sell ".concat(e.holdings[1].amount)},j=function(t){return t*v<=e.balance?void 0:"Can buy ".concat(Math.floor(e.balance/v))},S=function(){var t=Object(s.a)(o.a.mark((function t(a){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i(!0),t.next=3,u()({method:"post",headers:{"x-access-token":localStorage.getItem("token")},url:"".concat("https://jsramverk-paka17.azurewebsites.net","/holdings/transaction"),data:{price:v,action:a.option,crypto:"BitConnect",amount:a.amount,account:localStorage.getItem("username")}});case 3:return t.next=5,e.fetchHoldings();case 5:return t.next=7,e.fetchBalance();case 7:return t.next=9,w(a);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),w=function(e){u()({method:"post",headers:{"x-access-token":localStorage.getItem("token")},url:"".concat("https://jsramverk-paka17.azurewebsites.net","/history/add"),data:{buyer:localStorage.getItem("username"),crypto:"BitConnect",action:e.option,amount:e.amount,price:v}}).then((function(){u()({method:"GET",headers:{"x-access-token":g},url:"".concat("https://jsramverk-paka17.azurewebsites.net","/history/get")})})).then((function(){O()})).finally((function(){i(!1)}))},O=function(){fetch("".concat("https://jsramverk-paka17.azurewebsites.net","/crypto"),{method:"GET",headers:{"x-access-token":g}})};Object(n.useEffect)((function(){var e="".concat("https://jsramverk-paka17.azurewebsites.net","/"),t=Object(h.a)(e);return O(),t.on("crypto",(function(e){k(e[1].value)})),function(){t.off("crypto")}}),[]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a,{sx:6},r.a.createElement("div",{className:"chartcard_second"},r.a.createElement("div",{className:"chartcard_top"},r.a.createElement("span",{className:"chartcard_title"},"BitConnect"),r.a.createElement("span",{className:"chartcard_value"},v," Kr")),r.a.createElement("div",{className:"chartcard_bottom"},c?r.a.createElement("div",{className:"loadingStyle"},r.a.createElement("h6",null,"Transaction in progress... "),r.a.createElement(b.a,{size:"2rem",color:"lightgray",className:"loadingIconStyle"})):r.a.createElement(m.b,{onSubmit:function(t){return t.amount*v<=e.balance&&"purchased"===t.option||t.amount<=e.holdings[1].amount&&"sold"===t.option?(S(t),null):void 0},allowNegative:!1,render:function(e){var t=e.handleSubmit,a=e.values,n=e.submitting,c=e.pristine,l=e.form;e.errors;return r.a.createElement("form",{className:"chartcard_form",onSubmit:function(){var e=Object(s.a)(o.a.mark((function e(a){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(a);case 2:l.reset();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},r.a.createElement("div",null,r.a.createElement(m.a,{className:"label",name:"amount",fullWidth:!0,required:!0,component:p.TextField,type:"text",label:"Amount",autoComplete:"off",parse:x})),a.amount&&r.a.createElement("div",{className:"error_msg"},r.a.createElement("span",null,N(a.amount)),r.a.createElement("span",null,j(a.amount))),r.a.createElement("div",{className:"chartcard_buttons"},r.a.createElement("span",null,r.a.createElement(d.a,{variant:"contained",color:"primary",className:"primary_button",type:"submit",onClick:function(){l.change("option","sold")},disabled:n||c||N(a.amount)},"Sell")),r.a.createElement("span",null,r.a.createElement(d.a,{variant:"contained",color:"primary",className:"primary_button",type:"submit",onClick:function(){l.change("option","purchased")},disabled:n||c||j(a.amount)},"Buy"))))}})))))}),y=function(e){var t=Object(n.useState)(!1),a=Object(l.a)(t,2),c=a[0],i=a[1],g=localStorage.getItem("token"),y=Object(n.useState)(0),E=Object(l.a)(y,2),v=E[0],k=E[1],x=function(e){return isNaN(parseFloat(e))?"":parseFloat(e)},N=function(t){return t<=e.holdings[0].amount?void 0:"Can sell ".concat(e.holdings[0].amount)},j=function(t){return t*v<=e.balance?void 0:"Can buy ".concat(Math.floor(e.balance/v))},S=function(){var t=Object(s.a)(o.a.mark((function t(a){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i(!0),t.next=3,u()({method:"post",headers:{"x-access-token":localStorage.getItem("token")},url:"".concat("https://jsramverk-paka17.azurewebsites.net","/holdings/transaction"),data:{price:v,action:a.option,crypto:"BitCoin",amount:a.amount,account:localStorage.getItem("username")}});case 3:return t.next=5,e.fetchHoldings();case 5:return t.next=7,e.fetchBalance();case 7:return t.next=9,w(a);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),w=function(e){u()({method:"post",headers:{"x-access-token":localStorage.getItem("token")},url:"".concat("https://jsramverk-paka17.azurewebsites.net","/history/add"),data:{buyer:localStorage.getItem("username"),crypto:"BitCoin",action:e.option,amount:e.amount,price:v}}).then((function(){u()({method:"GET",headers:{"x-access-token":localStorage.getItem("token")},url:"".concat("https://jsramverk-paka17.azurewebsites.net","/history/get")})})).then((function(){O()})).finally((function(){i(!1)}))},O=function(){fetch("".concat("https://jsramverk-paka17.azurewebsites.net","/crypto"),{method:"GET",headers:{"x-access-token":g}})};Object(n.useEffect)((function(){var e="".concat("https://jsramverk-paka17.azurewebsites.net","/"),t=Object(h.a)(e);return O(),t.on("crypto",(function(e){k(e[0].value)})),function(){t.off("crypto")}}),[]);var _=function(){var t=Object(s.a)(o.a.mark((function t(a){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(a.amount*v<=e.balance&&"purchased"===a.option)){t.next=3;break}return S(a),t.abrupt("return",null);case 3:if(!(a.amount<=e.holdings[0].amount&&"sold"===a.option)){t.next=6;break}return S(a),t.abrupt("return",null);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a,{sx:6},r.a.createElement("div",{className:"chartcard_first"},r.a.createElement("div",{className:"chartcard_top"},r.a.createElement("span",{className:"chartcard_title"},"BitCoin"),r.a.createElement("span",{className:"chartcard_value"},v," Kr")),r.a.createElement("div",{className:"chartcard_bottom"},c?r.a.createElement("div",{className:"loadingStyle"},r.a.createElement("h6",null,"Transaction in progress... "),r.a.createElement(b.a,{size:"2rem",color:"lightgray",className:"loadingIconStyle"})):r.a.createElement(m.b,{onSubmit:_,render:function(e){var t=e.handleSubmit,a=e.values,n=e.submitting,c=e.pristine,l=e.form;e.errors;return r.a.createElement("form",{className:"chartcard_form",onSubmit:function(){var e=Object(s.a)(o.a.mark((function e(a){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(a);case 2:l.reset();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},r.a.createElement("div",null,r.a.createElement(m.a,{className:"label",name:"amount",fullWidth:!0,component:p.TextField,type:"text",label:"Amount",autoComplete:"off",parse:x})),a.amount&&r.a.createElement("div",{className:"error_msg"},r.a.createElement("span",null,N(a.amount)),r.a.createElement("span",null,j(a.amount))),r.a.createElement("div",{className:"chartcard_buttons"},r.a.createElement("span",null,r.a.createElement(d.a,{variant:"contained",color:"primary",className:"primary_button",type:"submit",onClick:function(){l.change("option","sold")},disabled:n||c||!a.amount||N(a.amount)},"Sell")),r.a.createElement("span",null,r.a.createElement(d.a,{variant:"contained",color:"primary",className:"primary_button",type:"submit",onClick:function(){({}),l.change("option","purchased")},disabled:n||c||!a.amount||j(a.amount)},"Buy"))))}})))))},E=a(595),v=function(){var e=localStorage.getItem("token"),t=r.a.useState([]),a=Object(l.a)(t,2),c=a[0],o=a[1],s=function(){u()({method:"get",headers:{"x-access-token":e},url:"".concat("https://jsramverk-paka17.azurewebsites.net","/chart/")}).then((function(e){var t=e.data.response.slice(-6).map((function(e){return{date:e.date.split(" ")[1],btc:e.btc,bc:e.bc}}));o(t)})).catch((function(e){console.error(e)}))};return Object(n.useEffect)((function(){var e="".concat("https://jsramverk-paka17.azurewebsites.net","/"),t=Object(h.a)(e);return t.on("history",(function(e){return s()})),s(),function(){t.off("history")}}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement(E.d,{width:"99%",height:"99%"},r.a.createElement(E.b,{data:c,margin:{top:10,right:30,left:0,bottom:0}},r.a.createElement("defs",null,r.a.createElement("linearGradient",{id:"colorUv",x1:"0",y1:"0",x2:"0",y2:"1"},r.a.createElement("stop",{offset:"5%",stopColor:"#8884d8",stopOpacity:.8}),r.a.createElement("stop",{offset:"95%",stopColor:"#8884d8",stopOpacity:0})),r.a.createElement("linearGradient",{id:"colorPv",x1:"0",y1:"0",x2:"0",y2:"1"},r.a.createElement("stop",{offset:"5%",stopColor:"#82ca9d",stopOpacity:.8}),r.a.createElement("stop",{offset:"95%",stopColor:"#82ca9d",stopOpacity:0}))),r.a.createElement(E.g,{stroke:"white"}),r.a.createElement(E.f,{dataKey:"date",stroke:"white"}),r.a.createElement(E.e,null),r.a.createElement(E.c,{className:"label",dataKey:"date",position:"insideTop",angle:"45"}),r.a.createElement(E.a,{type:"monotone",dataKey:"btc",stroke:"#fff",fillOpacity:1,fill:"url(#colorPv)"}),r.a.createElement(E.a,{type:"monotone",dataKey:"bc",stroke:"#fff",fillOpacity:1,fill:"url(#colorUv)"}))))};a(593),t.default=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"test_container"},r.a.createElement("div",{className:"test_card_container"},r.a.createElement(y,{balance:e.balance,history:e.history,holdings:e.holdings,btc:e.btc,cryptoValue:e.btc,fetchHoldings:e.fetchHoldings,fetchBalance:e.fetchBalance,fetchCrypto:e.fetchCrypto}),r.a.createElement(g,{balance:e.balance,history:e.history,holdings:e.holdings,bc:e.bc,fetchHoldings:e.fetchHoldings,fetchBalance:e.fetchBalance,fetchCrypto:e.fetchCrypto})),r.a.createElement("div",{className:"test_chart_container"},r.a.createElement(v,null))))}}}]);
//# sourceMappingURL=9.c8b61158.chunk.js.map